# سیستم مدیریت محتوای نانومهر (CMS)

## نصب و راه‌اندازی

### 1. ایجاد حساب کاربری ادمین

برای ورود به پنل مدیریت، ابتدا باید یک حساب کاربری ایجاد کنید:

```bash
# از طریق API یا Supabase Dashboard یک کاربر ایجاد کنید
```

یا می‌توانید از طریق کنسول جاوااسکریپت در مرورگر:

```javascript
fetch('https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-008a3150/auth/signup', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_ANON_KEY'
  },
  body: JSON.stringify({
    email: 'admin@nanomehr.com',
    password: 'your_secure_password',
    name: 'Admin'
  })
}).then(res => res.json()).then(console.log);
```

### 2. دسترسی به پنل مدیریت

برای ورود به CMS، به آدرس زیر بروید:

```
https://your-domain.com/#cms
```

یا در کد خود:

```javascript
window.location.hash = 'cms';
// یا
handleNavigate('cms');
```

### 3. ورود به سیستم

- ایمیل و رمز عبور خود را وارد کنید
- پس از ورود موفق، به پنل مدیریت هدایت می‌شوید

### 4. مقداردهی اولیه محتوا

در اولین ورود، از دکمه **"مقداردهی اولیه"** استفاده کنید تا تمام محتوای پیش‌فرض سایت ایجاد شود.

## امکانات CMS

### بخش‌های قابل مدیریت:

1. **صفحه اصلی (Hero)**
   - عنوان و زیرعنوان
   - توضیحات
   - تصویر پس‌زمینه

2. **آمار (Stats)**
   - مشتریان فعال
   - پروژه‌های موفق
   - سال‌های تجربه
   - کارشناسان متخصص

3. **خدمات (Services)**
   - مواد پلیمری
   - رنگ‌های صنعتی
   - کود و سموم
   - نرم افزارهای صنعتی

4. **محصولات (Products)**
   - مشخصات کامل هر محصول
   - تصاویر
   - ویژگی‌ها
   - کاربردها
   - مشخصات فنی

5. **درباره ما (About)**
   - معرفی شرکت
   - ماموریت و چشم‌انداز
   - ارزش‌های سازمانی

6. **مشتریان (Customers)**
   - لیست مشتریان
   - لوگو و اطلاعات

7. **تماس (Contact)**
   - شماره تماس
   - ایمیل
   - آدرس
   - شبکه‌های اجتماعی

8. **فوتر (Footer)**
   - توضیحات
   - کپی‌رایت
   - لینک‌ها

9. **تنظیمات (Settings)**
   - نام سایت
   - آدرس سایت
   - زبان و جهت

## نحوه استفاده

### ویرایش محتوا:

1. از منوی سمت راست، بخش مورد نظر را انتخاب کنید
2. روی دکمه **"حالت ویرایش"** کلیک کنید
3. محتوای مورد نظر را ویرایش کنید
4. روی دکمه **"ذخیره تغییرات"** کلیک کنید

### افزودن آیتم جدید:

برای بخش‌هایی که لیست دارند (مانند خدمات، مشتریان، آمار):

1. به حالت ویرایش بروید
2. روی دکمه **"افزودن آیتم جدید"** کلیک کنید
3. اطلاعات را پر کنید
4. ذخیره کنید

### حذف آیتم:

1. در حالت ویرایش، روی آیکون سطل زباله کلیک کنید
2. ذخیره تغییرات را فراموش نکنید

## ساختار دیتابیس (KV Store)

تمام محتوا در Supabase KV Store ذخیره می‌شود:

```
cms:hero          - محتوای بخش Hero
cms:stats         - آمار و ارقام
cms:services      - لیست خدمات
cms:products      - اطلاعات محصولات
cms:about         - درباره ما
cms:customers     - لیست مشتریان
cms:contact       - اطلاعات تماس
cms:footer        - محتوای فوتر
cms:settings      - تنظیمات سایت
blog:*            - پست‌های وبلاگ
```

## API Endpoints

### احراز هویت:

- `POST /auth/signup` - ثبت‌نام
- `POST /auth/signin` - ورود
- `GET /auth/me` - اطلاعات کاربر جاری

### مدیریت محتوا:

- `GET /cms/content` - دریافت تمام محتوا (عمومی)
- `GET /cms/content/:section` - دریافت یک بخش (عمومی)
- `PUT /cms/content/:section` - به‌روزرسانی بخش (محافظت شده)
- `POST /cms/initialize` - مقداردهی اولیه (محافظت شده)

### وبلاگ:

- `GET /cms/blog` - لیست پست‌ها
- `GET /cms/blog/:id` - یک پست
- `POST /cms/blog` - ایجاد پست (محافظت شده)
- `PUT /cms/blog/:id` - ویرایش پست (محافظت شده)
- `DELETE /cms/blog/:id` - حذف پست (محافظت شده)

## امنیت

- تمام routeهای مدیریتی با Authentication محافظت شده‌اند
- توکن دسترسی در localStorage ذخیره می‌شود
- فقط کاربران احراز هویت شده می‌توانند محتوا را ویرایش کنند
- محتوای عمومی برای همه قابل دسترسی است

## نکات مهم

1. ✅ همیشه بعد از ویرایش، تغییرات را ذخیره کنید
2. ✅ قبل از حذف آیتم، مطمئن شوید
3. ✅ برای تصاویر از URL استفاده کنید
4. ✅ محتوا را به صورت منظم backup بگیرید
5. ✅ از رمز عبور قوی استفاده کنید

## پشتیبانی

برای مشکلات یا سوالات، با تیم پشتیبانی تماس بگیرید:

- ایمیل: info@nanomehr.com
- تلفن: 021-12345678
