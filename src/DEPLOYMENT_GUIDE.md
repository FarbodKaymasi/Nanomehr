# ุฑุงูููุง ฺฉุงูู Deploy ู ุฑุงูโุงูุฏุงุฒ CMS

## ๐ ููุฑุณุช ูุทุงูุจ

1. [ูพุดโูุงุฒูุง](#ูพุด-ูุงุฒูุง)
2. [ุฑุงูโุงูุฏุงุฒ Supabase](#ุฑุงู-ุงูุฏุงุฒ-supabase)
3. [Deploy ฺฉุฑุฏู Backend](#deploy-ฺฉุฑุฏู-backend)
4. [ุชูุธูุงุช ุงููุช](#ุชูุธูุงุช-ุงููุช)
5. [ุงุฌุงุฏ ุญุณุงุจ ุงุฏูู](#ุงุฌุงุฏ-ุญุณุงุจ-ุงุฏูู)
6. [ุฏุณุชุฑุณ ุจู CMS](#ุฏุณุชุฑุณ-ุจู-cms)
7. [ููุฏุงุฑุฏู ุงููู](#ููุฏุงุฑุฏู-ุงููู)
8. [ูุญูู ุงุณุชูุงุฏู](#ูุญูู-ุงุณุชูุงุฏู)

---

## ๐ง ูพุดโูุงุฒูุง

- โ ูพุฑูฺู Supabase ูุนุงู
- โ Supabase CLI ูุตุจ ุดุฏู (ุงุฎุชุงุฑ)
- โ ุฏุณุชุฑุณ ุจู Dashboard ุณุงุช

---

## ๐ ุฑุงูโุงูุฏุงุฒ Supabase

### 1. ูพุฑูฺู ุฑุง ุจู Supabase ูุชุตู ฺฉูุฏ

ูพุฑูฺู ุดูุง ูุจูุงู ุจู Supabase ูุชุตู ุดุฏู ุงุณุช. ูุทูุฆู ุดูุฏ ฺฉู:

- `SUPABASE_URL` ุชูุธู ุดุฏู ุจุงุดุฏ
- `SUPABASE_ANON_KEY` ุชูุธู ุดุฏู ุจุงุดุฏ
- `SUPABASE_SERVICE_ROLE_KEY` ุชูุธู ุดุฏู ุจุงุดุฏ

ุงู ููุงุฏุฑ ุฏุฑ Supabase Dashboard > Project Settings > API ููุฌูุฏ ูุณุชูุฏ.

### 2. ุจุฑุฑุณ ุงุชุตุงู

ุฏุฑ ฺฉูุณูู ูุฑูุฑฺฏุฑ:

```javascript
fetch('https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-008a3150/health')
  .then(res => res.json())
  .then(data => console.log('โ Server is running:', data));
```

ุงฺฏุฑ ูพุงุณุฎ `{"status":"ok"}` ุฏุฑุงูุช ฺฉุฑุฏุฏุ ููู ฺุฒ ุขูุงุฏู ุงุณุช!

---

## ๐ฆ Deploy ฺฉุฑุฏู Backend

Backend ุดูุง ุฏุฑ `/supabase/functions/server/index.tsx` ูุฑุงุฑ ุฏุงุฑุฏ.

### ุณุงุฎุชุงุฑ Backend:

```
/supabase/functions/server/
โโโ index.tsx          # Main server file
โโโ kv_store.tsx       # KV store utilities (ูุญุงูุธุช ุดุฏู)
```

### Routes ููุฌูุฏ:

**Authentication:**
- `POST /auth/signup` - ุซุจุชโูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ
- `POST /auth/signin` - ูุฑูุฏ ุจู ุณุณุชู
- `GET /auth/me` - ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ูุนู

**CMS Content:**
- `GET /cms/content` - ุฏุฑุงูุช ุชูุงู ูุญุชูุง
- `GET /cms/content/:section` - ุฏุฑุงูุช ฺฉ ุจุฎุด
- `PUT /cms/content/:section` - ุจูโุฑูุฒุฑุณุงู ุจุฎุด (ูุงุฒ ุจู auth)
- `POST /cms/initialize` - ููุฏุงุฑุฏู ุงููู (ูุงุฒ ุจู auth)

**Blog:**
- `GET /cms/blog` - ูุณุช ูพุณุชโูุง ูุจูุงฺฏ
- `GET /cms/blog/:id` - ุฌุฒุฆุงุช ฺฉ ูพุณุช
- `POST /cms/blog` - ุงุฌุงุฏ ูพุณุช (ูุงุฒ ุจู auth)
- `PUT /cms/blog/:id` - ูุฑุงุด ูพุณุช (ูุงุฒ ุจู auth)
- `DELETE /cms/blog/:id` - ุญุฐู ูพุณุช (ูุงุฒ ุจู auth)

---

## ๐ ุชูุธูุงุช ุงููุช

### 1. ุจุฑุฑุณ Environment Variables

ูุทูุฆู ุดูุฏ ฺฉู ุงู ูุชุบุฑูุง ุฏุฑ Supabase Edge Functions ุชูุธู ุดุฏูโุงูุฏ:

```bash
SUPABASE_URL=https://YOUR_PROJECT_ID.supabase.co
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

### 2. ุชูุธู CORS

CORS ุฏุฑ ุณุฑูุฑ ูุนุงู ุงุณุช ู ุชูุงู originูุง ุฑุง ูโูพุฐุฑุฏ. ุจุฑุง ูุญุท productionุ ุงู ุฑุง ูุญุฏูุฏ ฺฉูุฏ:

```typescript
cors({
  origin: "https://your-domain.com",
  // ...
})
```

### 3. ูุญุงูุธุช ุงุฒ Service Role Key

โ๏ธ **ูุดุฏุงุฑ ููู:** `SERVICE_ROLE_KEY` ููุท ุฏุฑ ุณูุช ุณุฑูุฑ ุงุณุชูุงุฏู ูโุดูุฏ ู ูุฑฺฏุฒ ุจู frontend ุงุฑุณุงู ููโุดูุฏ.

---

## ๐ค ุงุฌุงุฏ ุญุณุงุจ ุงุฏูู

### ุฑูุด 1: ุงุฒ ฺฉูุณูู ูุฑูุฑฺฏุฑ

1. ูุจโุณุงุช ุฑุง ุจุงุฒ ฺฉูุฏ
2. ฺฉูุณูู ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉูุฏ (F12)
3. ุงู ฺฉุฏ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```javascript
// ููุงุฏุฑ ุฑุง ุจุง ุงุทูุงุนุงุช ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ
const projectId = 'YOUR_PROJECT_ID'; // ุงุฒ Supabase Dashboard
const anonKey = 'YOUR_ANON_KEY';     // ุงุฒ Supabase Dashboard

fetch(`https://${projectId}.supabase.co/functions/v1/make-server-008a3150/auth/signup`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${anonKey}`
  },
  body: JSON.stringify({
    email: 'admin@nanomehr.com',
    password: 'YourSecurePassword123!',
    name: 'Admin Nanomehr'
  })
})
.then(res => res.json())
.then(data => {
  if (data.user) {
    console.log('โ ุญุณุงุจ ฺฉุงุฑุจุฑ ุจุง ููููุช ุงุฌุงุฏ ุดุฏ!');
    console.log('๐ง ุงูู:', 'admin@nanomehr.com');
    console.log('๐ ุฑูุฒ ุนุจูุฑ:', 'YourSecurePassword123!');
    console.log('๐ค ูุงู:', data.user.user_metadata.name);
    console.log('\n๐ ุงฺฉููู ูโุชูุงูุฏ ูุงุฑุฏ CMS ุดูุฏ!');
  } else {
    console.error('โ ุฎุทุง:', data.error);
  }
});
```

### ุฑูุด 2: ุงุฒ ุทุฑู REST Client

ุฏุฑ Postman ุง ูุฑ REST client ุฏฺฏุฑ:

```
POST https://YOUR_PROJECT_ID.supabase.co/functions/v1/make-server-008a3150/auth/signup
Authorization: Bearer YOUR_ANON_KEY
Content-Type: application/json

{
  "email": "admin@nanomehr.com",
  "password": "YourSecurePassword123!",
  "name": "Admin"
}
```

### ุฑูุด 3: ุงุฒ Supabase Dashboard

1. ูุงุฑุฏ Supabase Dashboard ุดูุฏ
2. ุจุฑู ุจู **Authentication** > **Users**
3. ุฑู **Add user** ฺฉูฺฉ ฺฉูุฏ
4. ุงูู ู ุฑูุฒ ุนุจูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ
5. **Auto Confirm User** ุฑุง ูุนุงู ฺฉูุฏ

---

## ๐ฏ ุฏุณุชุฑุณ ุจู CMS

### ุฑูุด 1: ุงุฒ ุทุฑู URL Hash

ุฏุฑ ุขุฏุฑุณ ูุฑูุฑฺฏุฑ:

```
https://your-site.com/#cms
```

ุง ุจุง ุฌุงูุงุงุณฺฉุฑูพุช:

```javascript
window.location.hash = 'cms';
```

### ุฑูุด 2: ุฏฺฉูู ูุฎู (ุงุฎุชุงุฑ)

ูโุชูุงูุฏ ุฏุฑ Footer ุง ูุฑ ุฌุง ุฏฺฏุฑ ฺฉ ููฺฉ ูุฎู ุงุถุงูู ฺฉูุฏ:

```jsx
<button onClick={() => window.location.hash = 'cms'}>
  CMS
</button>
```

### ุตูุญู ูุฑูุฏ

ูพุณ ุงุฒ ุจุงุฒ ฺฉุฑุฏู CMSุ ุตูุญู ูุฑูุฏ ููุงุด ุฏุงุฏู ูโุดูุฏ:

1. ุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ
2. ุฑูุฒ ุนุจูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ
3. ุฑู "ูุฑูุฏ ุจู ูพูู" ฺฉูฺฉ ฺฉูุฏ

---

## ๐จ ููุฏุงุฑุฏู ุงููู

ูพุณ ุงุฒ ูุฑูุฏ ุจู CMS ุจุฑุง ุงููู ุจุงุฑ:

### 1. ุฑู ุฏฺฉูู "ููุฏุงุฑุฏู ุงููู" ฺฉูฺฉ ฺฉูุฏ

ุงู ุฏฺฉูู ุฏุฑ ุณุงุฏุจุงุฑ ูพุงู ูุฑุงุฑ ุฏุงุฑุฏ ู ุชูุงู ูุญุชูุง ูพุดโูุฑุถ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ:

- ุตูุญู ุงุตู (Hero)
- ุขูุงุฑ ุดุฑฺฉุช
- ุฎุฏูุงุช (4 ุฎุฏูุช)
- ูุญุตููุงุช (4 ูุญุตูู ฺฉุงูู)
- ุฏุฑุจุงุฑู ูุง
- ูุดุชุฑุงู
- ุงุทูุงุนุงุช ุชูุงุณ
- ููุชุฑ
- ุชูุธูุงุช ุณุงุช

### 2. ุจุฑุฑุณ ูุญุชูุง

ุจุนุฏ ุงุฒ ููุฏุงุฑุฏู:
- ุจู ูุฑ ุจุฎุด ุจุฑูุฏ
- ูุญุชูุง ุงุฌุงุฏ ุดุฏู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ุฏุฑ ุตูุฑุช ูุงุฒ ูุฑุงุด ฺฉูุฏ

---

## ๐ ูุญูู ุงุณุชูุงุฏู

### ูุฑุงุด ูุญุชูุง:

1. **ุงูุชุฎุงุจ ุจุฎุด**: ุงุฒ ููู ุณูุช ุฑุงุณุชุ ุจุฎุด ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. **ูุนุงู ฺฉุฑุฏู ูุฑุงุด**: ุฑู ุฏฺฉูู "ุญุงูุช ูุฑุงุด" ฺฉูฺฉ ฺฉูุฏ
3. **ูุฑุงุด**: ููุฏูุง ููุฑุฏ ูุธุฑ ุฑุง ูุฑุงุด ฺฉูุฏ
4. **ุฐุฎุฑู**: ุฑู ุฏฺฉูู "ุฐุฎุฑู ุชุบุฑุงุช" ฺฉูฺฉ ฺฉูุฏ

### ุงูุฒูุฏู ุขุชู ุฌุฏุฏ:

ุจุฑุง ุจุฎุดโูุง ูุซู ุฎุฏูุงุชุ ูุดุชุฑุงูุ ุขูุงุฑ:

1. ูุงุฑุฏ ุญุงูุช ูุฑุงุด ุดูุฏ
2. ุฑู ุฏฺฉูู "ุงูุฒูุฏู ุขุชู ุฌุฏุฏ" ฺฉูฺฉ ฺฉูุฏ
3. ุงุทูุงุนุงุช ุฑุง ูพุฑ ฺฉูุฏ
4. ุฐุฎุฑู ฺฉูุฏ

### ุญุฐู ุขุชู:

1. ุฏุฑ ุญุงูุช ูุฑุงุด
2. ุฑู ุขฺฉูู ุณุทู ุฒุจุงูู ฺฉูุงุฑ ุขุชู ฺฉูฺฉ ฺฉูุฏ
3. ุฐุฎุฑู ุชุบุฑุงุช

### ุขูพููุฏ ุชุตุงูุฑ:

ูุนูุงู CMS ุงุฒ URL ุชุตุงูุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ. ูโุชูุงูุฏ:
- ุงุฒ Unsplash ุงุณุชูุงุฏู ฺฉูุฏ
- ุชุตุงูุฑ ุฑุง ุฏุฑ CDN ุฎูุฏ ุขูพููุฏ ฺฉูุฏ
- ุงุฒ ุณุฑูุณโูุง hosting ุชุตูุฑ ุงุณุชูุงุฏู ฺฉูุฏ

---

## ๐ ุงุณุชูุงุฏู ุงุฒ ูุญุชูุง CMS ุฏุฑ Frontend

### ุจุง ุงุณุชูุงุฏู ุงุฒ Hook:

```tsx
import { useCMSSection } from '../hooks/useCMSContent';

function HeroSection() {
  const { data: hero, loading } = useCMSSection('hero');

  if (loading) return <div>ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</div>;

  return (
    <section>
      <h1>{hero?.title || 'ุนููุงู ูพุดโูุฑุถ'}</h1>
      <p>{hero?.subtitle}</p>
    </section>
  );
}
```

### ุจุง ุงุณุชูุงุฏู ุงุฒ API ูุณุชูู:

```typescript
import { CMSApi } from '../utils/cms-helpers';
import { projectId, publicAnonKey } from '../utils/supabase/info';

const api = new CMSApi(projectId, publicAnonKey);
const content = await api.getSection('hero');
```

---

## ๐ ูุฏุฑุช ุฏุงุฏูโูุง

### ุณุงุฎุชุงุฑ KV Store:

```
cms:hero          - ุจุฎุด Hero
cms:stats         - ุขูุงุฑ
cms:services      - ุฎุฏูุงุช
cms:products      - ูุญุตููุงุช
cms:about         - ุฏุฑุจุงุฑู ูุง
cms:customers     - ูุดุชุฑุงู
cms:contact       - ุชูุงุณ
cms:footer        - ููุชุฑ
cms:settings      - ุชูุธูุงุช
blog:*            - ูพุณุชโูุง ูุจูุงฺฏ
```

### Backup ูุญุชูุง:

ุจุฑุง backup ุงุฒ ูุญุชูุง CMS:

```javascript
const api = new CMSApi(projectId, publicAnonKey);
const allContent = await api.getAllContent();
console.log(JSON.stringify(allContent, null, 2));
// ูุญุชูุง ุฑุง ฺฉูพ ฺฉุฑุฏู ู ุฏุฑ ูุงู ุฐุฎุฑู ฺฉูุฏ
```

### Restore ูุญุชูุง:

```javascript
// ุจุง ุชูฺฉู ุงุฏูู
const token = 'YOUR_ACCESS_TOKEN';
await api.updateSection('hero', backupHeroData, token);
```

---

## ๐ ุนุจโุงุจ

### ูุดฺฉู 1: ููโุชูุงูู ูุงุฑุฏ CMS ุดูู

- โ ูุทูุฆู ุดูุฏ ฺฉู ุญุณุงุจ ฺฉุงุฑุจุฑ ุงุฌุงุฏ ฺฉุฑุฏูโุงุฏ
- โ ุงูู ู ุฑูุฒ ุนุจูุฑ ุฑุง ุฏูุจุงุฑู ุจุฑุฑุณ ฺฉูุฏ
- โ Cache ูุฑูุฑฺฏุฑ ุฑุง ูพุงฺฉ ฺฉูุฏ

### ูุดฺฉู 2: ุฏฺฉูู "ุฐุฎุฑู" ฺฉุงุฑ ููโฺฉูุฏ

- โ ูุทูุฆู ุดูุฏ ฺฉู ุฏุฑ ุญุงูุช ูุฑุงุด ูุณุชุฏ
- โ ุชูฺฉู ุดูุง ูููุถ ุดุฏู ุจุงุดุฏ (ุฏูุจุงุฑู login ฺฉูุฏ)
- โ Console ุฑุง ุจุฑุง ุฎุทุงูุง ุจุฑุฑุณ ฺฉูุฏ

### ูุดฺฉู 3: ูุญุชูุง ููุงุด ุฏุงุฏู ููโุดูุฏ

- โ ุงุฒ ุฏฺฉูู "ููุฏุงุฑุฏู ุงููู" ุงุณุชูุงุฏู ฺฉูุฏ
- โ Backend ุฑุง ฺฺฉ ฺฉูุฏ ฺฉู ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ
- โ Network tab ุฑุง ุจุฑุง ุฎุทุงูุง API ุจุฑุฑุณ ฺฉูุฏ

### ูุดฺฉู 4: ุฎุทุง 401 Unauthorized

- โ ุฏูุจุงุฑู login ฺฉูุฏ
- โ ุชูฺฉู ุฑุง ุฏุฑ localStorage ุจุฑุฑุณ ฺฉูุฏ
- โ Service Role Key ุฑุง ุฏุฑ environment variables ุจุฑุฑุณ ฺฉูุฏ

---

## ๐ ุขููุฒุด ฺฉุงูู

ุจุฑุง ุขููุฒุด ุจุดุชุฑ:
- `CMS_GUIDE.md` - ุฑุงูููุง ฺฉุงูู CMS
- `CMS_QUICK_START.md` - ุดุฑูุน ุณุฑุน
- `examples/CMSUsageExamples.tsx` - ูุซุงูโูุง ฺฉุฏ

---

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. Console ูุฑูุฑฺฏุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. Network tab ุฑุง ุจุฑุง ุฎุทุงูุง API ฺฺฉ ฺฉูุฏ
3. Supabase Logs ุฑุง ุจุฑุฑุณ ฺฉูุฏ

---

## โ Checklist ููุง

ูุจู ุงุฒ production:

- [ ] ุญุณุงุจ ุงุฏูู ุงุฌุงุฏ ุดุฏู
- [ ] ููุฏุงุฑุฏู ุงููู ุงูุฌุงู ุดุฏู
- [ ] ุชูุงู ูุญุชูุงูุง ุจุฑุฑุณ ู ูุฑุงุด ุดุฏูโุงูุฏ
- [ ] ุชุตุงูุฑ ุจุงุฑฺฏุฐุงุฑ ุดุฏูโุงูุฏ
- [ ] CORS ุจุฑุง domain ุฎุงุต ุชูุธู ุดุฏู
- [ ] ุฑูุฒูุง ุนุจูุฑ ูู ุงุณุชูุงุฏู ุดุฏูโุงูุฏ
- [ ] Backup ุงุฒ ูุญุชูุง ฺฏุฑูุชู ุดุฏู
- [ ] ุชุณุช ฺฉุงูู ุงูุฌุงู ุดุฏู

---

**๐ ุชุจุฑฺฉ! CMS ุดูุง ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช!**

ุจุฑุง ุดุฑูุนุ ุจู ุขุฏุฑุณ `https://your-site.com/#cms` ุจุฑูุฏ ู ุจุง ุงุทูุงุนุงุช ุงุฏูู ูุงุฑุฏ ุดูุฏ.
